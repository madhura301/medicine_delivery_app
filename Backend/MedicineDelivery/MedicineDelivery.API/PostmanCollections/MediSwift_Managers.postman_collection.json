{
	"info": {
		"_postman_id": "mediswift-managers-testing",
		"name": "MediSwift - Managers Testing",
		"description": "End-to-end test of the Managers CRUD flow.\n\nCovers:\n- System bootstrap (roles, permissions, users)\n- Admin login\n- Register managers\n- Get all managers\n- Get manager by ID\n- Get manager by email\n- Update manager\n- Upload manager photo\n- Delete manager (soft delete)\n- Verification of deletion\n\nRun this collection using Postman's Collection Runner to execute all requests sequentially.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{ "key": "baseUrl", "value": "http://localhost:5000", "type": "string" },
		{ "key": "adminToken", "value": "", "type": "string" },
		{ "key": "managerId1", "value": "", "type": "string" },
		{ "key": "managerId2", "value": "", "type": "string" },
		{ "key": "managerEmail1", "value": "", "type": "string" }
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"console.log('\\n========== ' + pm.info.requestName + ' ==========');"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"console.log('[' + pm.info.requestName + '] Status: ' + pm.response.code + ' ' + pm.response.status);",
					"if (pm.response.code >= 400) {",
					"    console.error('[' + pm.info.requestName + '] ERROR BODY: ' + pm.response.text());",
					"}"
				]
			}
		}
	],
	"item": [
		{
			"name": "1 - System Bootstrap",
			"description": "One-time setup: creates roles, permissions, role-permission mappings, and admin seed user.",
			"item": [
				{
					"name": "01. Create Predefined Roles",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/setup/roles/predefined",
							"host": ["{{baseUrl}}"],
							"path": ["api", "setup", "roles", "predefined"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Predefined roles created or already exist', function () {",
									"    pm.expect([200, 409]).to.include(pm.response.code);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "02. Create Predefined Permissions",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/setup/permissions/predefined",
							"host": ["{{baseUrl}}"],
							"path": ["api", "setup", "permissions", "predefined"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Predefined permissions created or already exist', function () {",
									"    pm.expect([200, 409]).to.include(pm.response.code);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "03. Map Role Permissions",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/setup/role-permissions/predefined",
							"host": ["{{baseUrl}}"],
							"path": ["api", "setup", "role-permissions", "predefined"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Role-permission mappings created or already exist', function () {",
									"    pm.expect([200, 409]).to.include(pm.response.code);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "04. Create Admin User",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/setup/users/admin",
							"host": ["{{baseUrl}}"],
							"path": ["api", "setup", "users", "admin"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Admin user created or already exists', function () {",
									"    pm.expect([200, 409]).to.include(pm.response.code);",
									"});"
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "2 - Admin Login",
			"description": "Admin logs in to get auth token.",
			"item": [
				{
					"name": "05. Admin Login",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"mobileNumber\": \"9999999999\",\n    \"password\": \"Admin@123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Auth", "login"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Admin login successful', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.success).to.eql(true);",
									"    pm.expect(json.token).to.be.a('string').and.not.empty;",
									"    pm.collectionVariables.set('adminToken', json.token);",
									"    console.log('Admin token captured.');",
									"});"
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "3 - Register Managers",
			"description": "Register two managers and test duplicate rejection.",
			"item": [
				{
					"name": "06. Register Manager 1",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"managerFirstName\": \"Rahul\",\n    \"managerLastName\": \"Kulkarni\",\n    \"managerMiddleName\": \"V\",\n    \"address\": \"Block A, Tech Park, Hinjewadi\",\n    \"city\": \"Pune\",\n    \"state\": \"Maharashtra\",\n    \"mobileNumber\": \"8888888801\",\n    \"emailId\": \"rahul.kulkarni@mediswift.com\",\n    \"alternativeMobileNumber\": \"8888888802\",\n    \"employeeId\": \"MGR-001\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "register"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 1 registered', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.managerId).to.not.be.undefined;",
									"    pm.expect(json.managerFirstName).to.eql('Rahul');",
									"    pm.expect(json.password).to.be.a('string').and.not.empty;",
									"    pm.collectionVariables.set('managerId1', json.managerId.toString());",
									"    pm.collectionVariables.set('managerEmail1', json.emailId);",
									"    console.log('managerId1 =', json.managerId);",
									"    console.log('Name:', json.managerFirstName, json.managerLastName);",
									"    console.log('Email:', json.emailId);",
									"    console.log('Generated Password:', json.password);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "07. Register Manager 2",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"managerFirstName\": \"Sneha\",\n    \"managerLastName\": \"Joshi\",\n    \"managerMiddleName\": \"A\",\n    \"address\": \"Flat 12, Shivaji Nagar\",\n    \"city\": \"Pune\",\n    \"state\": \"Maharashtra\",\n    \"mobileNumber\": \"8888888803\",\n    \"emailId\": \"sneha.joshi@mediswift.com\",\n    \"alternativeMobileNumber\": \"8888888804\",\n    \"employeeId\": \"MGR-002\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "register"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 2 registered', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.managerId).to.not.be.undefined;",
									"    pm.expect(json.managerFirstName).to.eql('Sneha');",
									"    pm.collectionVariables.set('managerId2', json.managerId.toString());",
									"    console.log('managerId2 =', json.managerId);",
									"    console.log('Name:', json.managerFirstName, json.managerLastName);",
									"    console.log('Generated Password:', json.password);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "08. Register Manager - Duplicate Mobile (Expect Failure)",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"managerFirstName\": \"Duplicate\",\n    \"managerLastName\": \"Test\",\n    \"managerMiddleName\": \"X\",\n    \"address\": \"Test Address\",\n    \"city\": \"Pune\",\n    \"state\": \"Maharashtra\",\n    \"mobileNumber\": \"8888888801\",\n    \"emailId\": \"duplicate@mediswift.com\",\n    \"alternativeMobileNumber\": \"0000000000\",\n    \"employeeId\": \"MGR-DUP\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "register"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Duplicate mobile number rejected', function () {",
									"    pm.expect([400, 409, 500]).to.include(pm.response.code);",
									"    console.log('Duplicate mobile correctly rejected.');",
									"});"
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "4 - Read Managers",
			"description": "Test all GET endpoints for managers.",
			"item": [
				{
					"name": "09. Get All Managers",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('All managers returned', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.be.an('array').with.length.greaterThan(0);",
									"    console.log('Total managers:', json.length);",
									"    json.forEach(function(m) {",
									"        console.log('  ID:', m.managerId, '| Name:', m.managerFirstName, m.managerLastName, '| Active:', m.isActive);",
									"    });",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "10. Get Manager 1 by ID",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId1}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId1}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 1 details returned', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.managerId).to.eql(pm.collectionVariables.get('managerId1'));",
									"    pm.expect(json.managerFirstName).to.eql('Rahul');",
									"    pm.expect(json.managerLastName).to.eql('Kulkarni');",
									"    pm.expect(json.isActive).to.eql(true);",
									"    pm.expect(json.isDeleted).to.eql(false);",
									"    console.log('ID:', json.managerId);",
									"    console.log('Name:', json.managerFirstName, json.managerMiddleName, json.managerLastName);",
									"    console.log('Email:', json.emailId, '| Mobile:', json.mobileNumber);",
									"    console.log('EmployeeId:', json.employeeId);",
									"    console.log('City:', json.city, '| State:', json.state);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "11. Get Manager by ID - Not Found (Expect 404)",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/00000000-0000-0000-0000-000000000000",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "00000000-0000-0000-0000-000000000000"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Non-existent manager returns 404', function () {",
									"    pm.response.to.have.status(404);",
									"    console.log('Confirmed: empty GUID returns 404.');",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "12. Get Manager 1 by Email",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/by-email/{{managerEmail1}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "by-email", "{{managerEmail1}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager found by email', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.managerId).to.eql(pm.collectionVariables.get('managerId1'));",
									"    pm.expect(json.emailId).to.eql(pm.collectionVariables.get('managerEmail1'));",
									"    console.log('Found manager by email:', json.managerFirstName, json.managerLastName);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "13. Get Manager by Email - Not Found (Expect 404)",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/by-email/nonexistent@mediswift.com",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "by-email", "nonexistent@mediswift.com"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Non-existent email returns 404', function () {",
									"    pm.response.to.have.status(404);",
									"    console.log('Confirmed: unknown email returns 404.');",
									"});"
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "5 - Update Managers",
			"description": "Test update endpoints for managers.",
			"item": [
				{
					"name": "14. Update Manager 1 - Change Address & City",
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"managerFirstName\": \"Rahul\",\n    \"managerLastName\": \"Kulkarni\",\n    \"managerMiddleName\": \"V\",\n    \"address\": \"Block B, IT Park, Kharadi\",\n    \"city\": \"Pune\",\n    \"state\": \"Maharashtra\",\n    \"mobileNumber\": \"8888888801\",\n    \"emailId\": \"rahul.kulkarni@mediswift.com\",\n    \"alternativeMobileNumber\": \"8888888802\",\n    \"employeeId\": \"MGR-001\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId1}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId1}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 1 updated', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.address).to.include('Kharadi');",
									"    console.log('Updated Address:', json.address);",
									"    console.log('City:', json.city, '| State:', json.state);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "15. Update Manager 2 - Change Name & Employee ID",
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"managerFirstName\": \"Sneha\",\n    \"managerLastName\": \"Joshi-Patil\",\n    \"managerMiddleName\": \"A\",\n    \"address\": \"Flat 12, Shivaji Nagar\",\n    \"city\": \"Pune\",\n    \"state\": \"Maharashtra\",\n    \"mobileNumber\": \"8888888803\",\n    \"emailId\": \"sneha.joshi@mediswift.com\",\n    \"alternativeMobileNumber\": \"8888888804\",\n    \"employeeId\": \"MGR-002-SR\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId2}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId2}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 2 updated', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.managerLastName).to.eql('Joshi-Patil');",
									"    pm.expect(json.employeeId).to.eql('MGR-002-SR');",
									"    console.log('Updated Name:', json.managerFirstName, json.managerLastName);",
									"    console.log('Updated EmployeeId:', json.employeeId);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "16. Verify Manager 1 After Update",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId1}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId1}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 1 reflects updated data', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json.address).to.include('Kharadi');",
									"    pm.expect(json.updatedOn).to.not.be.null;",
									"    console.log('Address:', json.address);",
									"    console.log('UpdatedOn:', json.updatedOn);",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "17. Update Non-existent Manager (Expect 404)",
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"managerFirstName\": \"Ghost\",\n    \"managerLastName\": \"Manager\",\n    \"managerMiddleName\": \"\",\n    \"address\": \"Nowhere\",\n    \"city\": \"Unknown\",\n    \"state\": \"Unknown\",\n    \"mobileNumber\": \"0000000000\",\n    \"emailId\": \"ghost@mediswift.com\",\n    \"alternativeMobileNumber\": \"\",\n    \"employeeId\": \"MGR-GHOST\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/00000000-0000-0000-0000-000000000000",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "00000000-0000-0000-0000-000000000000"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Update non-existent manager returns 404', function () {",
									"    pm.response.to.have.status(404);",
									"    console.log('Confirmed: update empty GUID returns 404.');",
									"});"
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "6 - Upload Manager Photo",
			"description": "Test photo upload for managers.",
			"item": [
				{
					"name": "18. Upload Photo for Manager 1",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "photo",
									"type": "file",
									"src": "",
									"description": "Select a JPG/PNG image file before running this request"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId1}}/photo",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId1}}", "photo"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"// This test will only pass if a photo file is selected in the form-data",
									"if (pm.response.code === 200) {",
									"    pm.test('Photo uploaded successfully', function () {",
									"        var json = pm.response.json();",
									"        pm.expect(json.photoUrl).to.be.a('string').and.not.empty;",
									"        pm.expect(json.fileName).to.be.a('string').and.not.empty;",
									"        console.log('PhotoUrl:', json.photoUrl);",
									"        console.log('FileName:', json.fileName);",
									"    });",
									"} else if (pm.response.code === 400) {",
									"    pm.test('Photo upload skipped - no file selected (expected)', function () {",
									"        console.log('SKIP: Select a photo file in form-data to test this endpoint.');",
									"    });",
									"}"
								]
							}
						}
					]
				},
				{
					"name": "19. Upload Photo - No File (Expect 400)",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId1}}/photo",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId1}}", "photo"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('No photo returns 400', function () {",
									"    pm.response.to.have.status(400);",
									"    console.log('Confirmed: no photo file returns 400.');",
									"});"
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "7 - Delete Managers",
			"description": "Test soft delete and verify deletion.",
			"item": [
				{
					"name": "20. Delete Manager 2 (Soft Delete)",
					"request": {
						"method": "DELETE",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId2}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId2}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Manager 2 soft-deleted', function () {",
									"    pm.response.to.have.status(204);",
									"    console.log('managerId2 soft-deleted successfully.');",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "21. Verify Manager 2 Deleted (Expect 404)",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/{{managerId2}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "{{managerId2}}"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Deleted manager returns 404', function () {",
									"    pm.response.to.have.status(404);",
									"    console.log('Confirmed: managerId2 returns 404 after deletion.');",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "22. Delete Non-existent Manager (Expect 404)",
					"request": {
						"method": "DELETE",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers/00000000-0000-0000-0000-000000000000",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers", "00000000-0000-0000-0000-000000000000"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Delete non-existent manager returns 404', function () {",
									"    pm.response.to.have.status(404);",
									"    console.log('Confirmed: delete empty GUID returns 404.');",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "23. Final - Get All Managers (Verify State)",
					"request": {
						"method": "GET",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{adminToken}}" }
						],
						"url": {
							"raw": "{{baseUrl}}/api/Managers",
							"host": ["{{baseUrl}}"],
							"path": ["api", "Managers"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Final state: manager 1 exists, manager 2 should be deleted', function () {",
									"    pm.response.to.have.status(200);",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.be.an('array');",
									"    var id1 = pm.collectionVariables.get('managerId1');",
									"    var id2 = pm.collectionVariables.get('managerId2');",
									"    var mgr1 = json.find(m => m.managerId === id1);",
									"    var mgr2 = json.find(m => m.managerId === id2);",
									"    pm.expect(mgr1).to.not.be.undefined;",
									"    pm.expect(mgr1.isActive).to.eql(true);",
									"    console.log('Manager 1 present:', mgr1 ? 'Yes' : 'No');",
									"    console.log('Manager 2 present:', mgr2 ? 'Yes (isDeleted=' + mgr2.isDeleted + ')' : 'No (filtered out)');",
									"    console.log('Total managers:', json.length);",
									"});"
								]
							}
						}
					]
				}
			]
		}
	]
}
